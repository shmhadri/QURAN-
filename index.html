<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="ุงููุตุญู ุงููุฑูู - ูููุน ุซุงุจุช ุจุชุฌุฑุจุฉ ุฌุฑููุฏุฉ ูุจูุฑุฉ ูุชูููุจ ุตูุญุงุช ูุตูุช ูุฑู" />
  <meta name="theme-color" content="#0b1220" />
  <title>ุงููุตุญู ุงููุฑูู - ุฌุฑููุฏุฉ</title>

  <!-- Security: CSP (Using flip library from CDN) -->
  <meta http-equiv="Content-Security-Policy"
        content="
          default-src 'self';
          img-src 'self' data: blob:;
          style-src 'self' 'unsafe-inline';
          script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
          connect-src 'self';
          media-src 'self';
          worker-src 'self' blob:;
          base-uri 'self';
          form-action 'self';
          frame-ancestors 'self';
        ">

  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">๐</div>
      <div>
        <h1>ุงููุตุญู ุงููุฑูู</h1>
        <p>ุชุฌุฑุจุฉ ุฌุฑููุฏุฉ ูุจูุฑุฉ โข ุชูููุจ ุตูุญุงุช โข ุจุฏูู ุณูุฑูุฑ</p>
      </div>
    </div>

    <div class="controls">
      <button class="btn" id="prevBtn" type="button">โ ุงูุณุงุจู</button>

      <div class="pagebox" title="ุงุฐูุจ ูุตูุญุฉ">
        <span>ุตูุญุฉ</span>
        <input id="pageInput" type="number" min="1" inputmode="numeric" />
        <span id="pageCount">/ 0</span>
      </div>

      <button class="btn" id="nextBtn" type="button">ุงูุชุงูู โถ</button>

      <div class="sep"></div>

      <button class="btn" id="zoomOut" type="button">โ</button>
      <div class="zoomLabel" id="zoomLabel">100%</div>
      <button class="btn" id="zoomIn" type="button">๏ผ</button>

      <div class="sep"></div>

      <button class="btn" id="spreadToggle" type="button" title="ุตูุญุชูู/ุตูุญุฉ ูุงุญุฏุฉ">๐ ูุถุน ุงูุชูุจูุฑ</button>
      <button class="btn" id="fullscreenBtn" type="button" title="ููุก ุงูุดุงุดุฉ">โถ</button>
      <button class="btn" id="soundBtn" type="button" title="ุตูุช ุงููุฑู">๐</button>
      <div class="sep"></div>
      <button class="btn" id="resumeBtn" type="button" title="ุงูุนูุฏุฉ ูุขุฎุฑ ุตูุญุฉ" style="display:none;">๐ ูุชุงุจุนุฉ ุงููุฑุงุกุฉ</button>
      <button class="btn primary" id="indexBtn" type="button">โฐ ุงูููุฑุณ</button>
      <button class="btn" id="bookmarkBtn" type="button" title="ุญูุธ ุนูุงูุฉ">๐</button>
    </div>
  </header>

  <!-- Sidebars/Modals -->
  <div class="overlay" id="overlay"></div>
  
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>ููุฑุณ ุงูุณูุฑ</h2>
      <button class="close-btn" id="closeSidebar">ร</button>
    </div>
    <div class="search-box">
      <input type="text" id="surahSearch" placeholder="ุงุจุญุซ ุนู ุณูุฑุฉ..." />
    </div>
    <div class="surah-list" id="surahList"></div>
  </aside>

  <main class="layout">
    <section class="viewerShell" aria-label="ูุงุฑุฆ ุงููุตุญู">
      <div class="status" id="status">ุฌุงุฑู ุงูุชุญูููโฆ</div>
      
      <!-- Bookmark Indicator -->
      <div id="bookmarkRibbon" class="bookmark-ribbon hidden" title="ุนูุงูุฉ ูุญููุธุฉ">๐</div>

      <!-- Book container -->
      <div class="bookWrap">
        <div id="book" class="book" aria-label="ูุชุงุจ ุงูุชูููุจ"></div>
      </div>

      <footer class="hintbar">
        <div class="hint">ุงุณุญุจ ูููู/ูุณุงุฑ ููุชูููุจ โข ุฏุจู-ุชุงุจ ููุชูุจูุฑ ุจุงูุฌูุงู โข ุญูุธ ุขุฎุฑ ุตูุญุฉ ุชููุงุฆููุง</div>
        <div class="mini">
          <span id="modeLabel">ูุถุน: ุฌุฑููุฏุฉ</span>
        </div>
      </footer>
    </section>
  </main>

  <!-- Flipbook library (StPageFlip) -->
  <script src="https://cdn.jsdelivr.net/npm/page-flip@2.0.7/dist/js/page-flip.browser.min.js"></script>
  <script src="app.js"></script>

  <!-- Optional: register service worker for offline -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js").catch(() => {});
      });
    }
  </script>
</body>
</html>
